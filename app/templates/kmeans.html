{% extends 'base.html' %}

{% block style %}
  <style>
    li.htmx-swapping {
      opacity: 0;
      transition: opacity 1s ease-out;
    }
  </style>
{% endblock %}

{% block content %}
<div class="uk-card uk-card-default uk-card-body uk-width-2-3@m uk-margin-top">
<table>
  <tr>
    <td>
      <div id="orgs">
        <label>x: </label>
        <select
          name="x"
          hx-post="/kmeans"
          hx-target="#viz"
          hx-swap="outterHTML"
        >
          {% for col in cols %}
          <option value="{{col}}">{{col}}</option>
          {% endfor %}
        </select>
        <br>
        <label>y: </label>
        <select
          name="y"
          hx-post="/kmeans"
          hx-target="#viz"
          hx-swap="outterHTML"
        >
          {% for col in cols %}
          <option value="{{col}}">{{col}}</option>
          {% endfor %}
        </select>
        <br>
        cluster:<span id="demo"></span><br>
        <input type="range" min="1" max="4" value="3" class="slider" id="cluster"   name="cluster"
        hx-post="/kmeans"
        hx-target="#viz"
        hx-swap="outterHTML">
        <script>
          var slider = document.getElementById("cluster");
          var output = document.getElementById("demo");
          output.innerHTML = slider.value;
          
          slider.oninput = function() {
            output.innerHTML = this.value;
          }
          </script>
      </div>
    </td>
    <td>
        
        It demonstrates how to take the output of k-means clustering on the Iris dataset using scikit-learn, parameterizing the number of clusters and the variables to plot.
        
        The entire clustering and plotting pipeline is expressed as a single reactive function that responsively returns an updated plot when one of the widgets changes.
        
        The x marks the center of the cluster.
    </td>
  </tr>
</table>

  <div id="viz">

  </div>
</div>    

{% endblock %}
